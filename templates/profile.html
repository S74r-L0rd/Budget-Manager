{% extends "layout_user.html" %}

{% block styles %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/profile.js') }}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
{% endblock %}

{% block content %}
<!-- Profile Section -->
<section class="container profile-section">
    <div class="profile-container">
        <!-- Left Column: Profile image & Nav bar-->
        <!-- TODO: Use Flask to store the user photo -->
        <div class="profile-sidebar">
            <div class="profile-image-container">
                <img id="profile-img" src="{{ url_for('static', filename='media/images/user-review1.svg') }}" class="img-fluid rounded-circle w-100 mb-2 profile-image" alt="Profile image">
            </div>

            <!-- Photo input when edit photo is clicked-->
            <input type="file" id="photo-upload" accept="image/*" style="display: none;" onchange="previewImage(event)">
            <label for="photo-upload" class="btn btn-outline-dark btn-sm mt-3 mb-2 photo-btn">Edit photo</label>

            <div class="list-group mt-3" id="sidebar-tabs" role="tablist">
                <a class="list-group-item list-group-item-action active" id="profile-tab" data-bs-toggle="list" href="#profile" role="tab">My Profile</a>
                <a class="list-group-item list-group-item-action" data-bs-toggle="list" href="#logout" role="tab">Logout</a>
            </div>
        </div>
    
        <div class="profile-content">  
            <!-- Right Column: Details -->
            <div class="profile-details">
                <div class="tab-content">
                    <!-- My Profile -->
                    <div class="tab-pane fade show active" id="profile" role="tabpanel">
                        <h1 class="mb-4 fw-bold">My Profile</h1>
                        <div class="profile-card">
                            <div class="profile-card-header">
                                <h5 class="fw-bold">Account Detail</h5>
                                <button class="edit-btn" onclick="toggleEdit('account-detail')">Edit</button>
                            </div>
                            <!-- TODO: Define method 'POST' and Change route to 'update_profile' -->
                            <form>
                                <div id="account-detail-display" class="profile-card-content">
                                    <div class="profile-row">
                                        <div class="profile-item">
                                            <!-- TODO: change after backend development -->
                                            <label>Name</label>
                                            <p>name</p>
                                        </div>
                                    </div>
                                    <div class="profile-row">
                                        <div class="profile-item">
                                            <label>Email Address</label>
                                            <p>email</p>
                                        </div>
                                        <div class="profile-item">
                                            <label>Phone</label>
                                            <p>phone</p>
                                        </div>
                                    </div>
                                </div>
                                                           
                                <div id="account-detail-edit" class="profile-card-content d-none">
                                    <div class="profile-row">
                                        <div class="profile-item">
                                            <label>Name</label>
                                            <!-- TODO: Change 'value' after backend development (user.name)-->
                                            <input type="text" class="form-control" name="name" value="name">
                                        </div>
                                    </div>
                                    <div class="profile-row">
                                        <div class="profile-item">
                                            <label>Email Address</label>
                                            <input type="email" class="form-control" name="email" value="email">        
                                        </div>
                                        <div class="profile-item">
                                            <label>Phone</label>
                                            <input type="tel" class="form-control" name="phone" value="phone">                                          
                                        </div>
                                    </div>
                                    <div class="text-end mt-3">
                                        <button type="submit" class="btn btn-dark">Save</button>
                                        <button type="button" class="btn btn-outline-dark" onclick="toggleEdit('account-detail')">Cancel</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    
                        <div class="profile-card">
                            <div class="profile-card-header">
                                <h5 class="fw-bold">Personal Information</h5>
                                <button class="edit-btn" onclick="toggleEdit('personal-info')">Edit</button>
                            </div>
                            <!-- TODO: Define method 'POST' and Change route to 'update_profile' in form -->
                            <form>
                                <div id="personal-info-display" class="profile-card-content">
                                    <div class="profile-row">
                                        <div class="profile-item">
                                            <!-- TODO: change after backend development (p - profile.address) -->
                                            <label>Address</label>
                                            <p>address</p>
                                        </div>
                                        <div class="profile-item">
                                            <label>Date of Birth</label>
                                            <p>dob</p>
                                        </div>
                                    </div>
                                    <div class="profile-row">
                                        <div class="profile-item">
                                            <label>Gender</label>
                                            <p>gender</p>
                                        </div>
                                        <div class="profile-item">
                                            <label>Occupation</label>
                                            <p>occupation</p>
                                        </div>
                                    </div>
                                </div>
                                                           
                                <div id="personal-info-edit" class="profile-card-content d-none">
                                    <div class="profile-row">
                                        <div class="profile-item">
                                            <label>Address</label>
                                            <input type="text" class="form-control" name="address" value="address">
                                        </div>
                                        <div class="profile-item">
                                            <label>Date of Birth</label>
                                            <input type="date" class="form-control" name="dob" value="dob">
                                        </div>
                                    </div>
                                    <div class="profile-row">
                                        <div class="profile-item">
                                            <label>Gender</label>
                                            <select class="form-select" id="gender" name="gender">
                                                <option selected disabled>Gender</option>
                                                <option value="male">Male</option>
                                                <option value="female">Female</option>
                                                <option value="gen-other">Other</option>
                                            </select>
                                        </div>
                                        <div class="profile-item">
                                            <label>Occupation</label>
                                            <select class="form-select" id="occupation" name="occupation">
                                                <option selected disabled>Occupation</option>
                                                <option value="unemployed">Unemployed</option>
                                                <option value="student">Student</option>
                                                <option value="retired">Retired</option>
                                                <option value="corporate">Corporate/Office</option>
                                                <option value="healthcare">Healthcare</option>
                                                <option value="education">Education</option>
                                                <option value="trades">Trades/Services</option>
                                                <option value="publicsector">Public Sector</option>
                                                <option value="creative">Creative</option>
                                                <option value="selfemployed">Self-Employed</option>
                                                <option value="occ-other">Other</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="text-end mt-3">
                                        <button type="submit" class="btn btn-dark">Save</button>
                                        <button type="button" class="btn btn-outline-dark" onclick="toggleEdit('personal-info')">Cancel</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- Logout tab -->
                    <div class="tab-pane fade" id="logout" role="tabpanel">
                            <h1 class="mb-4 fw-bold">Logout</h2>
                            <p class="mb-4 mt-5">Are you sure you want to logout?</p>
                            <div class="d-flex justify-content-center mt-5 gap-3">
                                <button type="button" class="btn btn-dark me-2 logout-btn" data-bs-toggle="modal" data-bs-target="#logoutModal">Logout</button>
                                <button type="button" class="btn btn-outline-dark cancel-btn" onclick="switchToProfile()">Cancel</button>
                            </div>
                    </div>                 
                </div>
            </div>
        </div>
</section>

<!-- Logout modal -->
<div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content text-dark">
        <div class="modal-header">
          <h5 class="modal-title" id="logoutModalLabel">Confirm Logout</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Do you really want to logout?
        </div>
        <div class="modal-footer">
          <form action="{{ url_for('logout') }}" method="POST">
            <button type="submit" class="btn modal-logout-btn">Yes, Logout</button>
          </form>

          <button type="button" class="btn btn-outline-dark modal-cancel-btn" data-bs-dismiss="modal">Cancel</button>
        </div>
      </div>
    </div>
</div>

{% endblock %}