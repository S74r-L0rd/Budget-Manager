{% extends "layout.html" %}

{% block title %}Profile{% endblock %}

{% block styles %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/profile.js') }}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
{% endblock %}

{% block content %}
<!-- Profile Section -->
<section class="container profile-section">
    <div class="profile-container">
        <!-- Left Column: Profile image & Nav bar-->
        <!-- TODO: Use Flask to store the user photo -->
        <div class="profile-sidebar">
            <div class="profile-image-container">
                <img id="profile-img" src="{{ url_for('static', filename='media/images/user-review1.svg') }}" class="img-fluid rounded-circle w-100 mb-2 profile-image" alt="Profile image">
            </div>

            <!-- Photo input when edit photo is clicked-->
            <input type="file" id="photo-upload" accept="image/*" style="display: none;" onchange="previewImage(event)">
            <label for="photo-upload" class="btn btn-outline-dark btn-sm mt-3 mb-2 photo-btn">Edit photo</label>

            <div class="list-group mt-3" id="sidebar-tabs" role="tablist">
                <a class="list-group-item list-group-item-action active" data-bs-toggle="list" href="#profile" role="tab">Profile</a>
                <a class="list-group-item list-group-item-action" data-bs-toggle="list" href="#setting" role="tab">Account Setting</a>
                <a class="list-group-item list-group-item-action" data-bs-toggle="list" href="#logout" role="tab">Logout</a>
            </div>
        </div>
    

        <!-- Right Column: Details -->
        <!-- TODO: Use Flask to store the user data -->
        <div class="profile-details">
            <div class="tab-content">
                <!-- My Profile -->
                <div class="tab-pane fade show active" id="profile" role="tabpanel">
                    <h1 class="mb-4 fw-bold">My Profile</h2>
                    <table class="profile-table">
                        <tbody>
                            <tr>
                                <th scope="row">Name</th>
                                <td>Harry Potter</td>
                            </tr>
                            <tr>
                                <th scope="row">Email</th>
                                <td>harryPoter@email.com</td>
                            </tr>
                            <tr>
                                <th scope="row">Phone</th>
                                <td>+61 123 456 789</td>
                            </tr>
                            <tr>
                                <th scope="row">Address</th>
                                <td>35 Stirling Hwy, Crawley WA 6009</td>
                            </tr>
                            <tr>
                                <th scope="row">Date of Birth</th>
                                <td>25-12-2006</td>
                            </tr>
                            <tr>
                                <th scope="row">Gender</th>
                                <td>Male</td>
                            </tr>
                            <tr>
                                <th scope="row">Occupation</th>
                                <td>Student</td>
                            </tr>

                        </tbody>
                    </table>
                </div>
                <!-- Account setting -->
                <div class="tab-pane fade" id="setting" role="tabpanel">
                    <h1 class="mb-3 fw-bold">Account Setting</h2>
                    <form>
                    <div class="mb-4">
                        <label class="form-label">Email address</label>
                        <input type="email" class="form-control" value="harryPotter@email.com">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">First name</label>
                        <input type="text" class="form-control" value="Harry">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Last name</label>
                        <input type="text" class="form-control" value="Potter">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Date of Birth</label>
                        <input type="date" class="form-control" value="dob">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Gender</label>
                        <select class="form-select" id="gender" name="gender">
                            <option selected disabled>Gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="gen-other">Other</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Occupation</label>
                        <select class="form-select" id="occupation" name="occupation">
                            <option selected disabled>Occupation</option>
                            <option value="unemployed">Unemployed</option>
                            <option value="student">Student</option>
                            <option value="retired">Retired</option>
                            <option value="corporate">Corporate/Office</option>
                            <option value="healthcare">Healthcare</option>
                            <option value="education">Education</option>
                            <option value="trades">Trades/Services</option>
                            <option value="publicsector">Public Sector</option>
                            <option value="creative">Creative</option>
                            <option value="selfemployed">Self-Employed</option>
                            <option value="occ-other">Other</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-dark mb-5 save-btn">Save Changes</button>
                    </form>
                </div>
                <div class="tab-pane fade" id="logout" role="tabpanel">
                    <h1 class="mb-4 fw-bold">Logout</h2>
                    <p class="mb-4 mt-5">Are you sure you want to logout?</p>
                    <div class="d-flex justify-content-center mt-5 gap-3">
                        <!-- TODO: Use Flask to clear the session and redirect to logout -->
                        <button type="button" class="btn btn-dark me-2 logout-btn" data-bs-toggle="modal" data-bs-target="#logoutModal">Logout</button>
                        <a href="#profile" class="btn btn-outline-dark cancel-btn" data-bs-toggle="list" role="tab">Cancel</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

</section>

<div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-dark">
        <div class="modal-header">
            <h5 class="modal-title" id="logoutModalLabel">Confirm Logout</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            Are you sure you want to logout?
        </div>
        <div class="modal-footer">
            <form action="{{ url_for('logout') }}" method="POST">
            <button type="submit" class="btn modal-logout-btn">Yes, Logout</button>
            </form>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        </div>
        </div>
    </div>
</div>

{% endblock %}